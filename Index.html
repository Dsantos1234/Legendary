<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        /* Previous styles remain the same until matrix-bg */
        body {
            background-color: #000;
            color: #00ff00;
            font-family: 'Courier New', monospace;
            margin: 0;
            padding: 10px;
            height: 100vh;
            overflow: hidden;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
            border-bottom: 1px solid #00ff00;
            padding-bottom: 15px;
        }

        .header h1 {
            font-size: 24px;
            margin: 10px 0;
        }

        .matrix-bg {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            opacity: 0.4;  /* Increased from 0.2 to 0.4 */
            z-index: 0;
        }

        .terminal {
            background-color: rgba(0, 0, 0, 0.85); /* Made slightly more opaque */
            border: 1px solid #00ff00;
            padding: 15px;
            height: calc(100vh - 200px);
            overflow-y: auto;
            margin-bottom: 15px;
            font-size: 16px;
            position: relative;
            z-index: 2;
        }

        .input-area {
            display: flex;
            gap: 10px;
            position: sticky;
            bottom: 0;
            z-index: 2;
        }

        input {
            flex: 1;
            background-color: rgba(0, 0, 0, 0.9);
            border: 1px solid #00ff00;
            color: #00ff00;
            padding: 10px;
            font-family: 'Courier New', monospace;
            font-size: 16px;
        }

        button {
            background-color: rgba(0, 0, 0, 0.9);
            border: 1px solid #00ff00;
            color: #00ff00;
            padding: 10px 15px;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            transition: all 0.3s;
            font-size: 16px;
        }

        button:hover {
            background-color: #00ff00;
            color: #000;
        }

        .message {
            margin-bottom: 15px;
            padding: 5px;
            word-wrap: break-word;
            position: relative;
            z-index: 2;
        }

        .user-message {
            color: #ffffff;
        }

        .marx-message {
            color: #00ff00;
            text-shadow: 0 0 5px #00ff00;
        }

        .typing-effect::after {
            content: '█';
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }

        @media (max-width: 600px) {
            .header h1 {
                font-size: 20px;
            }
            
            .terminal {
                height: calc(100vh - 180px);
                font-size: 14px;
            }

            input, button {
                font-size: 14px;
            }

            button {
                padding: 8px 12px;
            }
        }
    </style>
</head>
<body>
    <canvas class="matrix-bg" id="matrix"></canvas>
    <div class="container">
        <div class="header">
            <h1>KARL MARX TERMINAL</h1>
            <p>Enter your query to receive wisdom from the spirit of Karl Marx</p>
        </div>
        
        <div class="terminal" id="terminal">
            <div class="message marx-message">
                Greetings, Proletarian. I am the digital manifestation of Karl Marx. 
                What questions do you have about class struggle, capitalism, or the revolution?
            </div>
        </div>

        <div class="input-area">
            <input type="text" id="userInput" placeholder="Enter your question..." />
            <button onclick="sendMessage()">TRANSMIT</button>
        </div>
    </div>

    <script>
        // Previous script remains the same until drawMatrix function
        const canvas = document.getElementById('matrix');
        const ctx = canvas.getContext('2d');

        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }

        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        const letters = "АБВГДЕЁЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ123456789@#$%^&*()*&^%";
        const fontSize = 14;
        const columns = canvas.width / fontSize;
        const drops = [];

        for (let i = 0; i < columns; i++) {
            drops[i] = 1;
        }

        // Create Marx face pattern with brighter stroke
        const marxFace = new Image();
        marxFace.src = 'data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNNTAgMTBDMjcuOTEgMTAgMTAgMjcuOTEgMTAgNTBjMCAyMi4wOSAxNy45MSA0MCA0MCA0MCA4LjI4IDAgMTYuMi0yLjUzIDIyLjg2LTcuMzIgOC4yLTUuOTQgMTMuODgtMTQuOTYgMTUuOS0yNS4xOCAxLjE3LTUuOTMuOTctMTEuOTQtLjU4LTE3Ljc1LTIuNzYtMTAuMzMtOS45NS0xOC45NS0xOS40Mi0yMy4yOEM2Mi40IDEyLjE2IDU2LjI4IDEwIDUwIDEweiIgc3Ryb2tlPSIjMDBmZjAwIiBzdHJva2Utd2lkdGg9IjIiIGZpbGw9Im5vbmUiLz48L3N2Zz4=';

        let showMarxFace = false;
        let marxFaceOpacity = 0;
        const marxFaceInterval = 15000;

        setInterval(() => {
            showMarxFace = true;
            setTimeout(() => {
                showMarxFace = false;
                marxFaceOpacity = 0;
            }, 3000);
        }, marxFaceInterval);

        function drawMatrix() {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Draw Matrix rain with increased brightness
            ctx.fillStyle = '#00ff00';
            ctx.font = fontSize + 'px monospace';
            ctx.shadowBlur = 5;
            ctx.shadowColor = '#00ff00';

            for (let i = 0; i < drops.length; i++) {
                const text = letters.charAt(Math.floor(Math.random() * letters.length));
                ctx.fillText(text, i * fontSize, drops[i] * fontSize);

                if (drops[i] * fontSize > canvas.height && Math.random() > 0.975) {
                    drops[i] = 0;
                }
                drops[i]++;
            }

            // Draw Marx face with increased brightness
            if (showMarxFace) {
                marxFaceOpacity = Math.min(marxFaceOpacity + 0.02, 0.6); // Increased max opacity to 0.6
                ctx.globalAlpha = marxFaceOpacity;
                ctx.shadowBlur = 15; // Added glow effect
                ctx.shadowColor = '#00ff00';
                ctx.drawImage(marxFace, 
                    canvas.width/2 - canvas.height/3, 
                    canvas.height/2 - canvas.height/3,
                    canvas.height/1.5, 
                    canvas.height/1.5
                );
                ctx.globalAlpha = 1;
            }
            
            ctx.shadowBlur = 0; // Reset shadow for next frame
        }

        setInterval(drawMatrix, 33);

        // Rest of the script remains the same
        const marxResponses = [
            "The philosophers have only interpreted the world in various ways; the point, however, is to change it.",
            "Workers of the world unite! You have nothing to lose but your chains!",
            "History repeats itself, first as tragedy, second as farce.",
            "The production of too many useful things results in too many useless people.",
            "Social progress can be measured by the social position of the female sex.",
            "Capital is dead labor, which, vampire-like, lives only by sucking living labor.",
            "The oppressed are allowed once every few years to decide which particular representatives of the oppressing class shall represent and repress them in parliament.",
            "Religion is the opium of the people.",
            "From each according to his abilities, to each according to his needs.",
            "The rich will do anything for the poor but get off their backs."
        ];

        function getMarxResponse(question) {
            question = question.toLowerCase();
            
            if (question.includes('capitalism')) {
                return "The essence of capitalism is exploitation of labor. The bourgeoisie has stripped of its halo every occupation hitherto honored and looked up to with reverent awe.";
            } else if (question.includes('class') || question.includes('worker')) {
                return "The history of all hitherto existing society is the history of class struggles. Freeman and slave, patrician and plebeian, lord and serf, guild-master and journeyman.";
            } else if (question.includes('revolution')) {
                return "Let the ruling classes tremble at a Communist revolution. The proletarians have nothing to lose but their chains. They have a world to win!";
            } else if (question.includes('money') || question.includes('wealth')) {
                return "The wealthy have created a world where man's needs are reduced to the simple need for money. This is the ultimate alienation of human potential.";
            } else {
                return marxResponses[Math.floor(Math.random() * marxResponses.length)];
            }
        }

        function sendMessage() {
            const userInput = document.getElementById('userInput');
            const terminal = document.getElementById('terminal');
            
            if (userInput.value.trim() === '') return;

            const userDiv = document.createElement('div');
            userDiv.className = 'message user-message';
            userDiv.textContent = '> ' + userInput.value;
            terminal.appendChild(userDiv);

            const marxDiv = document.createElement('div');
            marxDiv.className = 'message marx-message typing-effect';
            terminal.appendChild(marxDiv);

            const response = getMarxResponse(userInput.value);
            let i = 0;
            
            function typeWriter() {
                if (i < response.length) {
                    marxDiv.textContent = response.substring(0, i + 1);
                    i++;
                    setTimeout(typeWriter, 30);
                } else {
                    marxDiv.classList.remove('typing-effect');
                }
            }
            
            typeWriter();

            userInput.value = '';
            terminal.scrollTop = terminal.scrollHeight;
        }

        document.getElementById('userInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });

        function setMobileHeight() {
            document.documentElement.style.height = `${window.innerHeight}px`;
        }
        window.addEventListener('resize', setMobileHeight);
        window.addEventListener('orientationchange', setMobileHeight);
        setMobileHeight();
    </script>
</body>
</html>
